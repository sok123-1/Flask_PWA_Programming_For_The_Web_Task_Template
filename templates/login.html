<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Habitly — Sign in / Sign up</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root{
      /* teal + warm wood color scheme */
      --bg: #f3fbfa;               /* very light teal */
      --card: #ffffff;
      --teal: #0d9488;            /* teal-600 */
      --teal-400: #14b8a6;        /* teal-400 */
      --wood: #8b5e3c;            /* warm wood */
      --muted: #5b6b6a;
      --text: #072023;
      --radius: 12px;
      --shadow: 0 8px 24px rgba(7,32,35,0.06);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;
      background: linear-gradient(180deg, rgba(20,184,166,0.03), var(--bg));
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px;
    }

    .container{width:100%;max-width:980px;display:grid;grid-template-columns:1fr 420px;gap:24px}
    .hero{background:linear-gradient(180deg, rgba(13,148,136,0.04), rgba(139,94,60,0.01));border-radius:var(--radius);padding:22px;box-shadow:var(--shadow);display:flex;flex-direction:column;gap:12px;justify-content:center}
    .hero h2{margin:0;font-size:26px;color:var(--teal);font-weight:800}
    .hero p{margin:0;color:var(--muted);font-size:14px}
    .card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);border:1px solid rgba(7,32,35,0.03)}
    .brand{display:flex;align-items:center;gap:10px;justify-content:center;margin-bottom:6px}
    .brand-mark{width:48px;height:48;border-radius:10px;background:var(--teal);display:flex;align-items:center;justify-content:center;color:#fff;font-weight:800;font-size:18px}
    .brand-title{font-weight:800;color:var(--teal);font-size:18px}
    .tabs{display:flex;border-radius:10px;overflow:hidden;margin:12px 0;border:1px solid rgba(7,32,35,0.04)}
    .tab{flex:1;padding:10px;text-align:center;border:0;cursor:pointer;font-weight:700;color:var(--muted);font-size:14px;background:transparent}
    .tab.active{background:linear-gradient(90deg,var(--teal-400),var(--teal));color:#fff}
    label{display:block;font-size:13px;margin-bottom:6px;color:var(--text);font-weight:600}
    .input{width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(7,32,35,0.06);font-size:15px;background:#fff}
    .input:focus{outline:none;box-shadow:0 8px 18px rgba(13,148,136,0.06);border-color:rgba(13,148,136,0.18)}
    .btn{display:inline-flex;align-items:center;justify-content:center;padding:10px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--teal-400),var(--teal));color:#fff;font-weight:700;cursor:pointer;width:100%}
    .btn.ghost{background:#fff;border:1px solid rgba(7,32,35,0.06);color:var(--muted);width:auto;padding:9px 10px}
    .muted{font-size:13px;color:var(--muted)}
    .sep{height:1px;background:linear-gradient(90deg, transparent, rgba(7,32,35,0.04), transparent);margin:14px 0;border-radius:2px}
    .pw-hint{display:flex;align-items:center;gap:8px;font-size:13px;color:var(--muted)}
    .strength{height:8px;background:#eefaf9;border-radius:8px;overflow:hidden;margin-top:8px}
    .strength > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#5eead4,#2dd4bf);transition:width .18s}
    .error{color:#b91c1c;font-size:13px;margin-top:8px;display:none}
    @media (max-width:980px){.container{grid-template-columns:1fr;padding:12px}}
  </style>
</head>
<body>
  <div class="container">
    <div class="hero" aria-hidden="false">
      <h2>Welcome to Habitly</h2>
      <p class="muted" style="font-style:italic;font-size:15px;margin-top:6px;">
        Small, consistent actions compound into remarkable results.
      </p>
    </div>

    <div class="card" role="main" aria-labelledby="auth-title">
      <div style="text-align:center;margin-bottom:6px">
        <div class="brand">
          <div class="brand-mark">H</div>
          <div class="brand-title">Habitly</div>
        </div>
        <div id="auth-title" class="muted">Sign in or create your account</div>
      </div>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div>
            {% for category, msg in messages %}
              <div class="flash" style="background:{% if category=='error' %}#fff0f0{% elif category=='success' %}#ecfdf5{% else %}#f8fafc{% endif %}; color:{% if category=='error' %}#991b1b{% elif category=='success' %}#065f46{% else %}#0f172a{% endif %};padding:10px;border-radius:8px;margin-bottom:8px;">
                {{ msg }}
              </div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <div class="tabs" role="tablist" aria-label="Authentication">
        <button class="tab active" data-tab="login" role="tab" aria-selected="true">🔑 Sign in</button>
        <button class="tab" data-tab="signup" role="tab" aria-selected="false">📝 Create account</button>
      </div>

      <div id="login" class="tab-content active" aria-hidden="false">
        <form method="post" action="{{ url_for('login_page') }}" autocomplete="off" novalidate>
          <div class="form-row">
            <label for="login-email">Email</label>
            <input id="login-email" name="email" type="email" class="input" placeholder="you@example.com" required />
          </div>

          <div class="form-row">
            <label for="login-password">Password</label>
            <div style="position:relative">
              <input id="login-password" name="password" type="password" class="input" placeholder="••••••••" required />
              <button type="button" class="secondary-toggle" onclick="togglePassword('login-password', this)" aria-label="Toggle password" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:0;cursor:pointer;font-size:18px;color:var(--muted)">👁️</button>
            </div>
          </div>

          <div class="actions" style="margin-top:10px">
            <button class="btn" type="submit">🔑 Sign in</button>
          </div>

          <div class="helper muted" style="margin-top:10px">
            <button type="button" class="btn ghost" onclick="document.querySelector('[data-tab=signup]').click()">Create an account</button>
          </div>
        </form>
      </div>

      <div id="signup" class="tab-content" aria-hidden="true" style="display:none">
        <form method="post" action="{{ url_for('signup') }}" id="signup-form" autocomplete="off" novalidate>
          <div class="form-row">
            <label for="signup-name">Full name</label>
            <input id="signup-name" name="name" type="text" class="input" placeholder="Jane Doe" required />
          </div>

          <div class="form-row">
            <label for="signup-email">Email</label>
            <input id="signup-email" name="email" type="email" class="input" placeholder="you@example.com" required />
          </div>

          <div class="form-row">
            <label for="signup-password">Password</label>
            <div style="position:relative">
              <input id="signup-password" name="password" type="password" class="input" placeholder="Create a password" required />
              <button type="button" class="secondary-toggle" onclick="togglePassword('signup-password', this)" aria-label="Toggle password" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);background:none;border:0;cursor:pointer;font-size:18px;color:var(--muted)">👁️</button>
            </div>
            <div class="pw-hint">Minimum 6 characters · At least one UPPERCASE</div>
            <div class="strength" aria-hidden="true"><i id="strength-fill"></i></div>
            <div id="signup-error" class="error" role="alert"></div>
          </div>

          <div class="form-row">
            <label for="signup-confirm">Confirm password</label>
            <input id="signup-confirm" name="confirm_password" type="password" class="input" placeholder="Repeat password" required />
          </div>

          <div class="actions">
            <button class="btn" type="submit">📝 Create Account</button>
            <button type="button" class="btn ghost" onclick="document.querySelector('[data-tab=login]').click()">Have an account?</button>
          </div>
        </form>
      </div>

      <div class="sep" aria-hidden="true"></div>

      <div style="text-align:center">
        <a class="muted" href="/dashboard">Continue as guest (demo)</a>
      </div>
    </div>
  </div>

  <script>
    // Tabs
    document.querySelectorAll('.tab').forEach(tab=>{
      tab.addEventListener('click', function(){
        document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(tc=>{
          tc.classList.remove('active');
          tc.style.display = 'none';
          tc.setAttribute('aria-hidden','true');
        });
        this.classList.add('active');
        const id = this.dataset.tab;
        const panel = document.getElementById(id);
        panel.classList.add('active');
        panel.style.display = 'block';
        panel.setAttribute('aria-hidden','false');
      });
    });

    function togglePassword(id, btn){
      const el = document.getElementById(id);
      if (!el) return;
      if (el.type === 'password'){ el.type = 'text'; btn.textContent = '🙈'; }
      else { el.type = 'password'; btn.textContent = '👁️'; }
    }

    (function(){
      const pw = document.getElementById('signup-password');
      const confirm = document.getElementById('signup-confirm');
      const fill = document.getElementById('strength-fill');
      const err = document.getElementById('signup-error');
      const form = document.getElementById('signup-form');
      if (!pw || !fill || !form) return;
      function score(v){ let s=0; if(v.length>=6) s++; if(/[A-Z]/.test(v)) s++; return s; }
      function update(){ const v=pw.value||''; const s=score(v); const pct=Math.round((s/2)*100); fill.style.width=pct+'%'; if(s===2) fill.style.background='linear-gradient(90deg,#5eead4,#2dd4bf)'; else if(s===1) fill.style.background='linear-gradient(90deg,#f59e0b,#fbbf24)'; else fill.style.background='#ef4444'; err.style.display='none'; }
      pw.addEventListener('input', update);
      form.addEventListener('submit', function(e){ const v=pw.value||''; const c=confirm.value||''; if(v!==c){ e.preventDefault(); err.textContent='Passwords do not match.'; err.style.display='block'; return false } if(v.length<6||!/[A-Z]/.test(v)){ e.preventDefault(); err.textContent='Password must be at least 6 characters and include an uppercase letter.'; err.style.display='block'; pw.focus(); return false } return true })
      update();
    })();
  </script>
</body>
</html>